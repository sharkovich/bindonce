/*
    MIT License, http://www.opensource.org/licenses/MIT
*/
(function(){var n=angular.module("pasvaz.bindonce",[]);n.directive("bindonce",function(){var d=function(c){c&&0!==c.length?(c=(""+c).toLowerCase(),c=!("f"===c||"0"===c||"false"===c||"no"===c||"n"===c||"[]"===c)):c=!1;return c},f=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10);isNaN(f)&&(f=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10));return{restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(c,m,k,g){var l=
function(a,b,c){var h="show"===b?"":"none";b="hide"===b?"":"none";a.css("display",d(c)?h:b)},p=function(a,b){if(angular.isObject(b)&&!angular.isArray(b)){var c=[];angular.forEach(b,function(a,b){a&&c.push(b)});b=c}b&&a.addClass(angular.isArray(b)?b.join(" "):b)},e=function(a,b){a.transclude(b,function(b){var c=a.element.parent(),d=a.element&&a.element[a.element.length-1],h=c&&c[0]||d&&d.parentNode,e=d&&d.nextSibling||null;angular.forEach(b,function(a){h.insertBefore(a,e)})})};angular.extend(this,
{watcherRemover:void 0,binders:[],group:k.boName,element:m,ran:!1,addBinder:function(a){this.binders.push(a);this.ran&&this.runBinders()},setupWatcher:function(a){var b=this;this.watcherRemover=c.$watch(a,function(a){void 0!==a&&(b.removeWatcher(),b.checkBindonce(a))},!0)},checkBindonce:function(a){var b=this;a=a.$promise?a.$promise.then:a.then;"function"===typeof a?a(function(){b.runBinders()}):b.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=
void 0)},runBinders:function(){for(;0<this.binders.length;){var a=this.binders.shift();if(!this.group||this.group==a.group){var b=a.scope.$eval(a.interpolate?g(a.value):a.value);switch(a.attr){case "boIf":d(b)&&e(a,a.scope.$new());break;case "boSwitch":var c=a.controller[0];if(b=c.cases["!"+b]||c.cases["?"])a.scope.$eval(a.attrs.change),angular.forEach(b,function(b){e(b,a.scope.$new())});break;case "boSwitchWhen":b=a.controller[0];b.cases["!"+a.attrs.boSwitchWhen]=b.cases["!"+a.attrs.boSwitchWhen]||
[];b.cases["!"+a.attrs.boSwitchWhen].push({transclude:a.transclude,element:a.element});break;case "boSwitchDefault":b=a.controller[0];b.cases["?"]=b.cases["?"]||[];b.cases["?"].push({transclude:a.transclude,element:a.element});break;case "hide":case "show":l(a.element,a.attr,b);break;case "class":p(a.element,b);break;case "text":a.element.text(b);break;case "html":a.element.html(b);break;case "style":a.element.css(b);break;case "disabled":a.element.prop("disabled",b);break;case "src":a.element.attr(a.attr,
b);f&&a.element.prop("src",b);break;case "attr":angular.forEach(a.attrs,function(b,c){if(c.match(/^boAttr./)&&a.attrs[c]){var d=c.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var e=a.scope.$eval(a.attrs[c]);a.element.attr(d,e)}});break;case "href":case "alt":case "title":case "id":case "value":a.element.attr(a.attr,b)}}}this.ran=!0}})}],link:function(c,d,k,g){c=k.bindonce&&c.$eval(k.bindonce);void 0!==c?g.checkBindonce(c):(g.setupWatcher(k.bindonce),d.bind("$destroy",g.removeWatcher))}}});
angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},
{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1E3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",
transclude:"element",priority:800,require:"^boSwitch"}],function(d){return n.directive(d.directiveName,function(){return{priority:d.priority||200,transclude:d.transclude||!1,terminal:d.terminal||!1,require:["^bindonce"].concat(d.require||[]),controller:d.controller,compile:function(f,c,m){return function(c,g,l,f){var e=f[0],a=l.boParent;if(a&&e.group!==a){var b=e.element.parent();e=void 0;for(var h;9!==b[0].nodeType&&b.length;){if((h=b.data("$bindonceController"))&&h.group===a){e=h;break}b=b.parent()}if(!e)throw Error("No bindonce controller: "+
a);}e.addBinder({element:g,attr:d.attribute||d.directiveName,attrs:l,value:l[d.directiveName],interpolate:d.interpolate,group:a,transclude:m,controller:f.slice(1),scope:c})}}}})})})();